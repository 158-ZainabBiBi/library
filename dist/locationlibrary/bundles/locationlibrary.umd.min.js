!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@angular/router"),require("@angular/common/http"),require("ngx-toastr"),require("@angular/http"),require("rxjs/operators"),require("rxjs")):"function"==typeof define&&define.amd?define("locationlibrary",["exports","@angular/core","@angular/common","@angular/router","@angular/common/http","ngx-toastr","@angular/http","rxjs/operators","rxjs"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).locationlibrary={},t.ng.core,t.ng.common,t.ng.router,t.ng.common.http,t.i3,t.ng.http,t.rxjs.operators,t.rxjs)}(this,(function(t,e,o,n,r,i,a,l,s){"use strict";function c(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(o){if("default"!==o){var n=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(e,o,n.get?n:{enumerable:!0,get:function(){return t[o]}})}})),e.default=t,Object.freeze(e)}var p=c(e),d=c(n),u=c(i),v=c(a),f=function(){};f.ɵprov=p.ɵɵdefineInjectable({factory:function(){return new f},token:f,providedIn:"root"}),f.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],f.ctorParameters=function(){return[]};var y=function(){function t(){}return t.prototype.ngOnInit=function(){},t}();y.decorators=[{type:e.Component,args:[{selector:"lib-locationlibrary",template:"\n    <p>\n      locationlibrary works!\n    </p>\n  "}]}],y.ctorParameters=function(){return[]};var h=function(){function t(t,e,o){this.http=t,this._router=e,this._toastr=o}return t.prototype.saveToken=function(t){return!!t&&(localStorage.setItem("access_token",t),!0)},t.prototype.saveDetail=function(t){return!!t&&(localStorage.setItem("LocationManagement",JSON.stringify(t)),!0)},t.prototype.loadToken=function(){var t=localStorage.getItem("access_token");this.authToken=t},t.prototype.loaddetail=function(){var t=localStorage.getItem("LocationManagement");return this.user=JSON.parse(t),this.user},t.prototype.logout=function(){return localStorage.removeItem("LocationManagement"),localStorage.removeItem("access_token"),window.location.assign("http://accounts.kitaas.edu.pk/#/logout?application_ID=LocationManagement"),!0},t.prototype.logged=function(){var t=localStorage.getItem("LocationManagement"),e=localStorage.getItem("access_token");return!(!t||!e)},t}();h.ɵprov=p.ɵɵdefineInjectable({factory:function(){return new h(p.ɵɵinject(v.Http),p.ɵɵinject(d.Router),p.ɵɵinject(u.ToastrService))},token:h,providedIn:"root"}),h.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],h.ctorParameters=function(){return[{type:a.Http},{type:n.Router},{type:i.ToastrService}]};var g=function(){function t(t,e){this.http=t,this.loginService=e,this.BaseUrl=this.loginService.loaddetail().applicationservice_PATH,this.AuthUrl=this.loginService.loaddetail().oauthservice_PATH}return t.prototype.api=function(t){return this.http.post(this.BaseUrl+"apigateway",t).pipe(l.map((function(t){return t.json()})))},t}();g.ɵprov=p.ɵɵdefineInjectable({factory:function(){return new g(p.ɵɵinject(v.Http),p.ɵɵinject(h))},token:g,providedIn:"root"}),g.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],g.ctorParameters=function(){return[{type:a.Http},{type:h}]};var _=function(){function t(t){this._HttpcallService_=t}return t.prototype.get=function(){return this._HttpcallService_.api({service_NAME:"LOCATION",request_TYPE:"GET",request_URI:"lookup",request_BODY:""})},t.prototype.getAll=function(){return this._HttpcallService_.api({service_NAME:"LOCATION",request_TYPE:"GET",request_URI:"lookup/all",request_BODY:""})},t.prototype.getOne=function(t){var e={service_NAME:"LOCATION",request_TYPE:"GET",request_URI:"lookup/"+t,request_BODY:""};return this._HttpcallService_.api(e)},t.prototype.add=function(t){var e={service_NAME:"LOCATION",request_TYPE:"POST",request_URI:"lookup",request_BODY:JSON.stringify(t)};return this._HttpcallService_.api(e)},t.prototype.update=function(t,e){var o={service_NAME:"LOCATION",request_TYPE:"PUT",request_URI:"lookup/"+e,request_BODY:JSON.stringify(t)};return this._HttpcallService_.api(o)},t.prototype.delete=function(t){var e={service_NAME:"LOCATION",request_TYPE:"DELETE",request_URI:"lookup/"+t,request_BODY:""};return this._HttpcallService_.api(e)},t.prototype.search=function(t){var e={service_NAME:"LOCATION",request_TYPE:"POST",request_URI:"lookup/search",request_BODY:JSON.stringify(t)};return this._HttpcallService_.api(e)},t.prototype.searchAll=function(t){var e={service_NAME:"LOCATION",request_TYPE:"POST",request_URI:"lookup/search/all",request_BODY:JSON.stringify(t)};return this._HttpcallService_.api(e)},t.prototype.advancedSearch=function(t){var e={service_NAME:"LOCATION",request_TYPE:"POST",request_URI:"lookup/advancedsearch",request_BODY:JSON.stringify(t)};return this._HttpcallService_.api(e)},t.prototype.advancedSearchAll=function(t){var e={service_NAME:"LOCATION",request_TYPE:"POST",request_URI:"lookup/advancedsearch/all",request_BODY:JSON.stringify(t)};return this._HttpcallService_.api(e)},t.prototype.lookup=function(t){var e={service_NAME:"LOCATION",request_TYPE:"POST",request_URI:"lookup/entity",request_BODY:JSON.stringify({entityname:t})};return this._HttpcallService_.api(e)},t.prototype.entityList=function(){return this._HttpcallService_.api({service_NAME:"LOCATION",request_TYPE:"GET",request_URI:"lookup/entitylist",request_BODY:""})},t}();_.ɵprov=p.ɵɵdefineInjectable({factory:function(){return new _(p.ɵɵinject(g))},token:_,providedIn:"root"}),_.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],_.ctorParameters=function(){return[{type:g}]};var m=function(){function t(t){this._HttpcallService_=t}return t.prototype.get=function(){return this._HttpcallService_.api({service_NAME:"LOCATION",request_TYPE:"GET",request_URI:"location",request_BODY:""})},t.prototype.getAll=function(){return this._HttpcallService_.api({service_NAME:"LOCATION",request_TYPE:"GET",request_URI:"location/all",request_BODY:""})},t.prototype.getOne=function(t){var e={service_NAME:"LOCATION",request_TYPE:"GET",request_URI:"location/"+t,request_BODY:""};return this._HttpcallService_.api(e)},t.prototype.add=function(t){var e={service_NAME:"LOCATION",request_TYPE:"POST",request_URI:"location",request_BODY:JSON.stringify(t)};return this._HttpcallService_.api(e)},t.prototype.update=function(t,e){var o={service_NAME:"LOCATION",request_TYPE:"PUT",request_URI:"location/"+e,request_BODY:JSON.stringify(t)};return this._HttpcallService_.api(o)},t.prototype.delete=function(t){var e={service_NAME:"LOCATION",request_TYPE:"DELETE",request_URI:"location/"+t,request_BODY:""};return this._HttpcallService_.api(e)},t.prototype.search=function(t){var e={service_NAME:"LOCATION",request_TYPE:"POST",request_URI:"location/search",request_BODY:JSON.stringify(t)};return this._HttpcallService_.api(e)},t.prototype.searchAll=function(t){var e={service_NAME:"LOCATION",request_TYPE:"POST",request_URI:"location/search/all",request_BODY:JSON.stringify(t)};return this._HttpcallService_.api(e)},t.prototype.advancedSearch=function(t){var e={service_NAME:"LOCATION",request_TYPE:"POST",request_URI:"location/advancedsearch",request_BODY:JSON.stringify(t)};return this._HttpcallService_.api(e)},t.prototype.advancedSearchAll=function(t){var e={service_NAME:"LOCATION",request_TYPE:"POST",request_URI:"location/advancedsearch/all",request_BODY:JSON.stringify(t)};return this._HttpcallService_.api(e)},t.prototype.getAllDetail=function(t){for(var e=0;e<t.length;e++)t[e].locationleveltype=t[e].locationleveltype_ID.code+" - "+t[e].locationleveltype_ID.description;return t},t.prototype.getDetail=function(t){return t.locationleveltype=t.locationleveltype_ID.code+" - "+t.locationleveltype_ID.description,"Y"==t.isactive?t.isactive=!0:t.isactive=!1,t},t}();m.ɵprov=p.ɵɵdefineInjectable({factory:function(){return new m(p.ɵɵinject(g))},token:m,providedIn:"root"}),m.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],m.ctorParameters=function(){return[{type:g}]};var I=function(){function t(t,e){this._toaster=t,this._loginService=e}return t.prototype.onFail=function(t){if("invalid_token"==t.error)return this._toaster.warning("Internal session expired. Logged in again ","Logged out"),void this._loginService.logout();if(0!=t.status)if(404!=t.status){if(!t.hasOwnProperty("_body"))return t.hasOwnProperty("message")?void this._toaster.warning("Message"," "+t.message):void this._toaster.error("check your internet connection","Error");var e=JSON.parse(t._body);if(t){if(t._body)return t.hasOwnProperty("_body")?400==e.status?void this._toaster.error("unknown error occured","Error"):"invalid_token"==e.error?(this._toaster.warning("Internal session expired. Logged in again ","Logged out"),void this._loginService.logout()):void this._toaster.error("unknown error occured","Error"):void this._toaster.error("Status: "+t.status+" Error: "+e.error+" Message: "+e.error_description,"Error");this._toaster.error("unknown error occured","Error")}else this._toaster.error("unknown error occured","Error")}else this._toaster.error("unknown error occured","Error");else this._toaster.error("Connection timed out","Error")},t}();I.ɵprov=p.ɵɵdefineInjectable({factory:function(){return new I(p.ɵɵinject(u.ToastrService),p.ɵɵinject(h))},token:I,providedIn:"root"}),I.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],I.ctorParameters=function(){return[{type:i.ToastrService},{type:h}]};var b=function(){function t(t,o,n,r,i){this.locationservice=t,this.locationleveltypeservice=o,this.toastrservice=n,this.onfailservice=r,this.router=i,this.view=1,this.iscompulsory=!1,this.isshowlables=!0,this.disabled=!1,this.all=!1,this.locationID=null,this.locationleveltypeID=null,this.locationparentID=null,this.edit=new e.EventEmitter,this.cancel=new e.EventEmitter,this.selectedLocation=new e.EventEmitter,this.viewLocation=new e.EventEmitter,this.locationleveltypeLABEL=null,this.locations=[],this.locationsAll=[],this.location={location_ID:0,location_NAME:"",location_CODE:"",location_DESC:"",locationleveltype_ID:{id:null},locationparent_ID:null,latitude:null,longitude:null,altitude:null,isactive:!0},this.search={locationleveltype_ID:null,locationparent_ID:null}}return t.prototype.ngOnInit=function(){this.locations=JSON.parse(window.sessionStorage.getItem("locations")),this.locationsAll=JSON.parse(window.sessionStorage.getItem("locationsAll")),1==this.view&&null==this.locations?this.locationGet():6==this.view&&(this.search={locationleveltype_ID:this.locationleveltypeID,locationparent_ID:this.locationparentID},this.locationGetAdvancedSearchAll(this.search),this.locationleveltypeGetOne(this.locationleveltypeID)),this.locationID&&this.locationGetOne(this.locationID)},t.prototype.onToolbarPreparing=function(t){t.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{width:136,text:"Refresh",onClick:this.locationGetAll.bind(this)}})},t.prototype.add=function(){this.addlocation.locationID=null,this.location={location_ID:0,location_NAME:"",location_CODE:"",location_DESC:"",locationleveltype_ID:{id:null},locationparent_ID:null,latitude:null,longitude:null,altitude:null,isactive:!0}},t.prototype.update=function(t){this.edit.next(t)},t.prototype.viewlocation=function(t){this.viewLocation.next(t)},t.prototype.changeLocation=function(t){for(var e=0;e<this.locationsAll.length;e++)t==this.locationsAll[e].location_ID&&this.selectedLocation.next(this.locationsAll[e])},t.prototype.searchLocation=function(t,e){this.locationleveltypeID=t,this.locationparentID=e,this.search={locationleveltype_ID:this.locationleveltypeID,locationparent_ID:this.locationparentID},this.locationGetAdvancedSearchAll(this.search)},t.prototype.refreshLocation=function(){this.locationGetAdvancedSearchAll(this.search)},t.prototype.locationEdit=function(){this.disabled=!1},t.prototype.locationCancel=function(){this.disabled=!0,0==this.location.location_ID&&this.router.navigate(["/home/locations"],{})},t.prototype.setlocations=function(t){1==this.view?(this.locations=t,window.sessionStorage.setItem("locations",JSON.stringify(this.locations))):(this.locationsAll=t,window.sessionStorage.setItem("locationsAll",JSON.stringify(this.locationsAll))),this.cancel.next()},t.prototype.locationGet=function(){var t=this;this.locationservice.get().subscribe((function(e){e&&(e.error&&e.status?t.toastrservice.warning("Message"," "+e.message):(e=t.locationservice.getAllDetail(e),t.setlocations(e)))}),(function(e){t.onfailservice.onFail(e)}))},t.prototype.locationGetAll=function(){var t=this;this.locationservice.getAll().subscribe((function(e){e&&(e.error&&e.status?t.toastrservice.warning("Message"," "+e.message):(e=t.locationservice.getAllDetail(e),t.setlocations(e)))}),(function(e){t.onfailservice.onFail(e)}))},t.prototype.locationGetOne=function(t){var e=this;this.locationservice.getOne(t).subscribe((function(t){t&&(t.error&&t.status?e.toastrservice.warning("Message"," "+t.message):(t=e.locationservice.getDetail(t),e.location=t,e.disabled=!0,e.selectedLocation.next(t)))}),(function(t){e.onfailservice.onFail(t)}))},t.prototype.locationGetAdvancedSearchAll=function(t){var e=this;this.locationservice.advancedSearchAll(t).subscribe((function(t){t&&(t.error&&t.status?e.toastrservice.warning("Message"," "+t.message):(t=e.locationservice.getAllDetail(t),e.setlocations(t)))}),(function(t){e.onfailservice.onFail(t)}))},t.prototype.locationAdd=function(t){var e=this;t.locationleveltype_ID=this.locationleveltype.locationleveltypeID,t.locationparent_ID=this.locationsearchfilter.searchfilterID(),this.locationservice.add(t).subscribe((function(t){t&&(t.error&&t.status?e.toastrservice.warning("Message"," "+t.message):t.location_ID?(e.toastrservice.success("Success","New Location Added"),e.locationGetAll()):e.toastrservice.error("Some thing went wrong"))}),(function(t){e.onfailservice.onFail(t)}))},t.prototype.locationUpdate=function(t){var e=this;t.locationleveltype_ID=this.locationleveltype.locationleveltypeID,t.locationparent_ID=this.editlocation.locationID,console.log(t),1==t.isactive?t.isactive="Y":t.isactive="N",this.locationservice.update(t,t.location_ID).subscribe((function(t){t&&(t.error&&t.status?e.toastrservice.warning("Message"," "+t.message):t.location_ID?(e.toastrservice.success("Success"," Location Updated"),e.locationGetAll()):e.toastrservice.error("Some thing went wrong"))}),(function(t){e.onfailservice.onFail(t)}))},t.prototype.locationleveltypeGetOne=function(t){var e=this;this.locationleveltypeservice.getOne(t).subscribe((function(t){t&&(t.error&&t.status?e.toastrservice.warning("Message"," "+t.message):e.locationleveltypeLABEL=t.description)}),(function(t){e.onfailservice.onFail(t)}))},t}();b.decorators=[{type:e.Component,args:[{selector:"app-location",template:'<div *ngIf="view==1" class="form-group">\r\n    <label class="custom-label form-label">Location\r\n      <span style="color: red;" [hidden]="disabled" *ngIf="iscompulsory==true">*</span>\r\n  </label>\r\n    <div class="row">\r\n        <div class="col-md-10">\r\n            <ng-select [(ngModel)]="locationID" [disabled]="disabled" name="locationID">\r\n                <ng-option *ngFor="let location of locations" [value]="location.location_ID" [disabled]="disabled">\r\n                    {{ location.location_CODE }} - {{ location.location_NAME }}\r\n                </ng-option>\r\n            </ng-select>\r\n        </div>\r\n        <div class="col-md-2">\r\n            <button type="button" class="btn btn-light ml-2" [hidden]="disabled" (click)="locationGet()">\r\n              <i class="fa fa-refresh" aria-hidden="true"></i>\r\n          </button>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div *ngIf="view==2" class="form-group">\r\n    <div class="outer-div">\r\n        <div class="grid-wrapper">\r\n            <dx-data-grid #grid id="gridContainer" [dataSource]="locationsAll" keyExpr="location_ID" [showColumnLines]="true" [showRowLines]="true" [showBorders]="true" [rowAlternationEnabled]="true" [allowColumnResizing]="true" [columnMinWidth]="30"\r\n                [columnAutoWidth]="true" [remoteOperations]="true" height="600" width="100%"\r\n                (onToolbarPreparing)="onToolbarPreparing($event)">\r\n                <dxo-filter-row [visible]="true"></dxo-filter-row>\r\n                <dxo-header-filter [visible]="true"></dxo-header-filter>\r\n                <dxo-search-panel [visible]="true"></dxo-search-panel>\r\n                <dxo-group-panel [visible]="false"></dxo-group-panel>\r\n                <dxo-grouping #expand [autoExpandAll]="false"></dxo-grouping>\r\n                <dxo-scrolling mode="virtual"></dxo-scrolling>\r\n                <dxo-sorting mode="multiple"></dxo-sorting>\r\n                <dxo-selection mode="single"></dxo-selection>\r\n                <dxi-column [width]="75" [allowFiltering]="false" [allowSorting]="false" alignment="center" cellTemplate="cellTemplate"></dxi-column>\r\n                <dxi-column [width]="120" dataField="location_CODE" caption="Code" cssClass="myClass" alignment="center"></dxi-column>\r\n                <dxi-column [width]="300" dataField="location_NAME" caption="Name" cssClass="myClass" alignment="left"></dxi-column>\r\n                <dxi-column dataField="location_DESC" caption="Description" cssClass="myClass" alignment="left"></dxi-column>\r\n                <dxi-column [width]="300" dataField="locationparent_ID.location_NAME" caption="Parent Location" cssClass="myClass" alignment="center"></dxi-column>\r\n                <dxi-column [width]="300" dataField="locationleveltype" caption="Level Type" cssClass="myClass" alignment="center"></dxi-column>\r\n                <dxi-column [width]="100" dataField="isactive" caption="Active" cssClass="myClass" alignment="center"></dxi-column>\r\n\r\n                <div *dxTemplate="let data of \'cellTemplate\'">\r\n                    <a href="javascript:void" class="" (click)="viewlocation(data)">\r\n                        <i class="fa fa-eye" aria-hidden="true"></i></a>\r\n                </div>\r\n            </dx-data-grid>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div *ngIf="view==3" class="form-group">\r\n    <form action="" class="form" (ngSubmit)="f.form.valid && locationAdd(location)" #f="ngForm" novalidate>\r\n        <div class="modal-body">\r\n            <div class="row">\r\n                <div class="col-md-6">\r\n                    <div class="form-group">\r\n                        <label class="control-label"> Location Code <span style="color:red">*</span></label>\r\n                        <input type="text" class="form-control" name="location_CODE" [(ngModel)]="location.location_CODE" maxlength="50" required>\r\n                    </div>\r\n                </div>\r\n                <div class="col-md-6">\r\n                    <div class="form-group">\r\n                        <label class="control-label"> Location Name <span style="color:red">*</span></label>\r\n                        <input type="text" class="form-control" name="location_NAME" [(ngModel)]="location.location_NAME" maxlength="50" required>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="col-md-6">\r\n                        <app-locationleveltype #locationleveltype [iscompulsory]="true" [locationleveltypeID]="location.locationleveltype_ID"></app-locationleveltype>\r\n                </div>\r\n                <div class="col-md-6">\r\n                    <app-location #addlocation [view]="1"></app-location>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="col-md-12">\r\n                    <div class="form-group">\r\n                        <label class="control-label"> Location Description</label>\r\n                        <textarea rows="3" class="form-control" [(ngModel)]="location.location_DESC" name="location_DESC"></textarea>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="modal-footer">\r\n            <button type="submit" class="btn btn-primary" [disabled]="f.invalid">\r\n              <i class="fa fa-plus" aria-hidden="true"></i> Add\r\n          </button>\r\n            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>\r\n        </div>\r\n    </form>\r\n</div>\r\n\r\n<div *ngIf="view==4" class="form-group">\r\n    <form action="" class="form" (ngSubmit)="f.form.valid && locationUpdate(location)" #f="ngForm" novalidate>\r\n        <div class="modal-body">\r\n            <div class="row">\r\n                <div class="col-md-6">\r\n                    <div class="form-group">\r\n                        <label class="control-label"> Location Code <span style="color:red">*</span></label>\r\n                        <input type="text" class="form-control" name="location_CODE" [(ngModel)]="location.location_CODE" maxlength="50" required>\r\n                    </div>\r\n                </div>\r\n                <div class="col-md-6">\r\n                    <div class="form-group">\r\n                        <label class="control-label"> Location Name <span style="color:red">*</span></label>\r\n                        <input type="text" class="form-control" name="location_NAME" [(ngModel)]="location.location_NAME" maxlength="50" required>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="col-md-6">\r\n                    <app-locationleveltype #locationleveltype [iscompulsory]="true" [locationleveltypeID]="location.locationleveltype_ID"></app-locationleveltype>\r\n                </div>\r\n                <div class="col-md-6">\r\n                    <app-location #editlocation [view]="1" [locationID]="location.locationparent_ID"></app-location>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="col-md-12">\r\n                    <div class="form-group">\r\n                        <label class="control-label"> Location Description</label>\r\n                        <textarea rows="3" class="form-control" [(ngModel)]="location.location_DESC" name="location_DESC"></textarea>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="col-md-12">\r\n                    <div class="form-group">\r\n                        <div class="checkbox">\r\n                            <label class="control-label">\r\n                              <input type="checkbox" [checked]="location.isactive"\r\n                                  [(ngModel)]="location.isactive" name="isactive">\r\n                              Active\r\n                          </label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n        <div class="modal-footer">\r\n            <button type="submit" class="btn btn-primary" [disabled]="f.invalid">\r\n              <i class="fa fa-plus" aria-hidden="true"></i> Update\r\n          </button>\r\n            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>\r\n        </div>\r\n    </form>\r\n</div>\r\n\r\n<div *ngIf="view==5" class="form-group">\r\n    <div class="modal-body">\r\n        <app-locationsearchfilter #locationsearchfilter [issearchfilter]=false *ngIf="disabled==false"></app-locationsearchfilter>\r\n        <div class="row">\r\n            <div class="col-md-4">\r\n                <div class="form-group">\r\n                    <label class="control-label"> Location Code\r\n                        <span style="color: red;" [hidden]="disabled">*</span>\r\n                    </label>\r\n                    <input type="text" class="form-control" name="location_CODE" [(ngModel)]="location.location_CODE" [disabled]=\'disabled\' required>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-4">\r\n                <div class="form-group">\r\n                    <label class="control-label"> Location Name\r\n                        <span style="color: red;" [hidden]="disabled">*</span>\r\n                    </label>\r\n                    <input type="text" class="form-control" name="location_NAME" [(ngModel)]="location.location_NAME" [disabled]=\'disabled\' required>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-4">\r\n                <app-locationleveltype #locationleveltype [disabled]=\'disabled\' [locationleveltypeID]="location.locationleveltype_ID.id"></app-locationleveltype>\r\n            </div>\r\n        </div>\r\n        <div class="row" *ngIf="location.location_ID!=0">\r\n            <div class="col-md-12">\r\n                <div class="form-group">\r\n                    <label class="control-label">Location Parent</label>\r\n                    <input type="text" class="form-control" name="locationparent_ID" [(ngModel)]="location.locationparent_ID.location_NAME" [disabled]=true>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="row">\r\n            <div class="col-md-12">\r\n                <div class="form-group">\r\n                    <label class="control-label"> Location Description</label>\r\n                    <textarea rows="3" class="form-control" [(ngModel)]="location.location_DESC" name="location_DESC" [disabled]=\'disabled\'></textarea>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row" *ngIf="location.location_ID!=0">\r\n            <div class="col-md-3">\r\n                <div class="form-group">\r\n                    <label class="control-label">Latitude</label>\r\n                    <input type="text" class="form-control" name="latitude" [(ngModel)]="location.latitude" [disabled]=\'disabled\'>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-3">\r\n                <div class="form-group">\r\n                    <label class="control-label">Longitude</label>\r\n                    <input type="text" class="form-control" name="longitude" [(ngModel)]="location.longitude" [disabled]=\'disabled\'>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-3">\r\n                <div class="form-group">\r\n                    <label class="control-label">Altitude</label>\r\n                    <input type="text" class="form-control" name="altitude" [(ngModel)]="location.altitude" [disabled]=\'disabled\'>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-3">\r\n                <div class="form-group"><br /><br />\r\n                    <div class="checkbox">\r\n                        <label class="control-label">\r\n                            <input type="checkbox" [checked]="location.isactive"\r\n                                [(ngModel)]="location.isactive" [disabled]=\'disabled\' name="isactive">\r\n                            Active\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row">\r\n            <div class="col-md-3"></div>\r\n            <div class="col-md-3"></div>\r\n            <div class="col-md-3"></div>\r\n            <div class="col-md-3">\r\n                <button *ngIf="location.location_ID!=0 && disabled==true" (click)="locationEdit()" id="cancel" class="btn btn-primary"\r\n                    style="float: right;"> Edit\r\n                </button>\r\n                <button *ngIf="disabled==false" type="button" (click)=\'locationCancel()\' style="float: right;"\r\n                    class="btn btn-light" data-dismiss="modal"> Cancel\r\n                </button>\r\n                <button *ngIf="location.location_ID!=0 && disabled==false" type="button" data-dismiss="modal"\r\n                    style=" margin-right: 10px; float: right;" (click)=\'locationUpdate(location)\'\r\n                    class="btn btn-primary">\r\n                    Update\r\n                </button>\r\n                <button *ngIf="location.location_ID==0" type="button" data-dismiss="modal"\r\n                    style=" margin-right: 10px; float: right;" (click)=\'locationAdd(location)\'\r\n                    class="btn btn-primary">\r\n                    Save\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div *ngIf="view==6" class="form-group">\r\n    <label *ngIf="isshowlables==true" class="custom-label form-label"> {{ locationleveltypeLABEL }}\r\n      <span style="color: red;" [hidden]="disabled" *ngIf="iscompulsory==true">*</span>\r\n  </label>\r\n    <div class="row">\r\n        <div class="col-md-10">\r\n            <ng-select [(ngModel)]="locationID" [disabled]="disabled" name="locationID" (change)="changeLocation($event)">\r\n                <ng-option *ngFor="let location of locationsAll" [value]="location.location_ID" [disabled]="disabled">\r\n                    {{ location.location_CODE }} - {{ location.location_NAME }}\r\n                </ng-option>\r\n            </ng-select>\r\n        </div>\r\n        <div class="col-md-2">\r\n            <button type="button" class="btn btn-light ml-2" [hidden]="disabled" (click)="refreshLocation()">\r\n              <i class="fa fa-refresh" aria-hidden="true"></i>\r\n          </button>\r\n        </div>\r\n    </div>\r\n</div>\r\n',styles:[""]}]}],b.ctorParameters=function(){return[{type:m},{type:_},{type:i.ToastrService},{type:I},{type:n.Router}]},b.propDecorators={locationleveltype:[{type:e.ViewChild,args:["locationleveltype"]}],locationsearchfilter:[{type:e.ViewChild,args:["locationsearchfilter"]}],addlocation:[{type:e.ViewChild,args:["addlocation"]}],editlocation:[{type:e.ViewChild,args:["editlocation"]}],view:[{type:e.Input}],iscompulsory:[{type:e.Input}],isshowlables:[{type:e.Input}],disabled:[{type:e.Input}],all:[{type:e.Input}],locationID:[{type:e.Input}],locationleveltypeID:[{type:e.Input}],locationparentID:[{type:e.Input}],edit:[{type:e.Output}],cancel:[{type:e.Output}],selectedLocation:[{type:e.Output}],viewLocation:[{type:e.Output}]};var O=function(){function t(t,o,n){this.locationleveltypeservice=t,this.toastrservice=o,this.onfailservice=n,this.view=1,this.disabled=!1,this.issearchfilter=!0,this.isshowlables=!0,this.locationtypeID=10,this.locationID=0,this.locationsearchfilterID=0,this.advancedSearch=new e.EventEmitter,this.locationleveltypes=[],this.search={locationparent_ID:null}}return t.prototype.ngOnInit=function(){this.locationleveltypeGet()},t.prototype.searchfilter=function(){var t=this;this.locations.forEach((function(e){null!=e.locationID&&(t.search.locationparent_ID=e.locationID)})),this.advancedSearch.next(this.search)},t.prototype.searchfilterID=function(){var t;return this.locations.forEach((function(e){null!=e.locationID&&(t=e.locationID)})),t},t.prototype.reset=function(){},t.prototype.setLocation=function(t){var e=this;t.reverse(),t.forEach((function(t){e.locations.forEach((function(e){e.locationleveltypeID==t.locationleveltype_ID.id&&(e.locationID=t.location_ID),e.locationGetOne(t.location_ID)}))}))},t.prototype.selectedLocation=function(t){var e=this,o=!1;this.locations.forEach((function(n){1==o&&(n.searchLocation(n.locationleveltypeID,t.location_ID),o=!1,e.locationID=t.location_ID),n.locationleveltypeID==t.locationleveltype_ID.id&&(o=!0)})),this.locationID=t.location_ID},t.prototype.locationleveltypeGet=function(){var t=this;this.locationleveltypeservice.lookup("LOCATIONLEVELTYPE").subscribe((function(e){if(e)if(e.error&&e.status)t.toastrservice.warning("Message"," "+e.message);else{e[0].locationparentID=null,t.locationleveltypes.push(e[0]);for(var o=1;o<e.length;o++)e[o].locationparentID=-1,e[o].code<=t.locationtypeID&&t.locationleveltypes.push(e[o])}}),(function(e){t.onfailservice.onFail(e)}))},t}();O.decorators=[{type:e.Component,args:[{selector:"app-locationsearchfilter",template:'<div *ngIf="view==1" class="row">\r\n    <div class="col-md-12">\r\n        <div class="card-primary card">\r\n            <div class="card-header">\r\n                <div class="align-items-center row">\r\n                    <div class="col">\r\n                        <a href="javascript:void" aria-controls="collapse-customerinfo1" aria-expanded="true"\r\n                            class="card-title">Filter\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="card-body">\r\n                <div class="row">\r\n                    <div class="col-md-4" *ngFor="let locationleveltype of locationleveltypes">\r\n                        <app-location #locations [view]="6" [locationleveltypeID]="locationleveltype.id"\r\n                            [locationparentID]="locationleveltype.locationparentID"\r\n                            (selectedLocation)="selectedLocation($event)"></app-location>\r\n                    </div>\r\n                </div>\r\n                <div class="row" *ngIf="issearchfilter==true">\r\n                    <div class="col-md-12">\r\n                        <div class="form-group text-right">\r\n                            <button id="savebutton" class="btn btn-success ml-2" (click)="searchfilter()">\r\n                                Search\r\n                            </button>\r\n                            <button type="button" class="btn btn-light ml-2" (click)="reset()">\r\n                                Reset\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div *ngIf="view==2" class="row">\r\n    <div class="col-md-12">\r\n        <div class="row">\r\n            <div class="col-md-6" *ngFor="let locationleveltype of locationleveltypes">\r\n                <app-location #locations [view]="6" [disabled]=\'disabled\' [locationleveltypeID]="locationleveltype.id"\r\n                    [locationparentID]="locationleveltype.locationparentID"\r\n                    (selectedLocation)="selectedLocation($event)"></app-location>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div *ngIf="view==3" class="row">\r\n    <div class="col-md-12">\r\n        <div class="row">\r\n            <div class="col-md-4" *ngFor="let locationleveltype of locationleveltypes">\r\n                <app-location #locations [view]="6" [disabled]=\'disabled\' [locationleveltypeID]="locationleveltype.id"\r\n                    [locationparentID]="locationleveltype.locationparentID"\r\n                    (selectedLocation)="selectedLocation($event)"></app-location>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div *ngIf="view==4" class="row">\r\n    <div class="col-md-12">\r\n        <div class="row">\r\n            <div class="col-md-12" *ngFor="let locationleveltype of locationleveltypes">\r\n                <app-location #locations [view]="6" [disabled]=\'disabled\' [isshowlables]="isshowlables" [locationleveltypeID]="locationleveltype.id"\r\n                    [locationparentID]="locationleveltype.locationparentID"\r\n                    (selectedLocation)="selectedLocation($event)"></app-location>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n',styles:[""]}]}],O.ctorParameters=function(){return[{type:_},{type:i.ToastrService},{type:I}]},O.propDecorators={locations:[{type:e.ViewChildren,args:[b]}],view:[{type:e.Input}],disabled:[{type:e.Input}],issearchfilter:[{type:e.Input}],isshowlables:[{type:e.Input}],locationtypeID:[{type:e.Input}],locationID:[{type:e.Input}],locationsearchfilterID:[{type:e.Input}],advancedSearch:[{type:e.Output}]};var D=function(){function t(t,e,o){this.locationleveltypeservice=t,this.toastrservice=e,this.onfailservice=o,this.iscompulsory=!1,this.disabled=!1,this.all=!1,this.locationleveltypeID=null,this.locationleveltypes=[]}return t.prototype.ngOnInit=function(){this.locationleveltypes=JSON.parse(window.sessionStorage.getItem("locationleveltypes")),null==this.locationleveltypes&&this.locationleveltypeGet(),!this.locationleveltypeID&&Number(window.sessionStorage.getItem("locationleveltype"))>0&&(this.locationleveltypeID=Number(window.sessionStorage.getItem("locationleveltype"))),this.locationleveltypeID&&window.sessionStorage.setItem("locationleveltype",this.locationleveltypeID)},t.prototype.setLocationType=function(t){this.locationleveltypes=t,window.sessionStorage.setItem("locationleveltypes",JSON.stringify(this.locationleveltypes))},t.prototype.locationleveltypeGet=function(){var t=this;this.locationleveltypeservice.lookup("LOCATIONLEVELTYPE").subscribe((function(e){e&&(e.error&&e.status?t.toastrservice.warning("Message"," "+e.message):t.setLocationType(e))}),(function(e){t.onfailservice.onFail(e)}))},t}();D.decorators=[{type:e.Component,args:[{selector:"app-locationleveltype",template:'<div class="form-group">\r\n    <label class="custom-label form-label">Location Level Type\r\n        <span style="color: red;" [hidden]="disabled" *ngIf="iscompulsory==true">*</span>\r\n    </label>\r\n    <div class="row">\r\n        <div class="col-md-10">\r\n            <ng-select [(ngModel)]="locationleveltypeID" [disabled]="disabled" name="locationleveltypeID" maxlength="50">\r\n                <ng-option *ngFor="let locationleveltype of locationleveltypes" [value]="locationleveltype.id" [disabled]="disabled">\r\n                    {{ locationleveltype.code }} - {{ locationleveltype.description }}\r\n                </ng-option>\r\n            </ng-select>\r\n        </div>\r\n        <div class="col-md-2">\r\n            <button type="button" class="btn btn-light ml-2" [hidden]="disabled" (click)="locationleveltypeGet()">\r\n                <i class="fa fa-refresh" aria-hidden="true"></i>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>\r\n',styles:[""]}]}],D.ctorParameters=function(){return[{type:_},{type:i.ToastrService},{type:I}]},D.propDecorators={iscompulsory:[{type:e.Input}],disabled:[{type:e.Input}],all:[{type:e.Input}],locationleveltypeID:[{type:e.Input}]};var S=function(){function t(){}return t.prototype.ngOnInit=function(){},t}();S.decorators=[{type:e.NgModule,args:[{declarations:[y,b,D,O],imports:[n.RouterModule,r.HttpClientModule,o.CommonModule],providers:[{provide:o.LocationStrategy,useClass:o.PathLocationStrategy}],exports:[y,b,D,O]}]}],S.ctorParameters=function(){return[]};var E=function(){function t(t){this._HttpcallService_=t}return t.prototype.getByPostcode=function(t){var e={service_NAME:"GETADDRESS",request_TYPE:"GET",request_URI:"find/"+t+"?api-key=V4QHzniNakGufrLJgB3ROw29270&expand=true",request_BODY:""};return this._HttpcallService_.api(e)},t}();E.ɵprov=p.ɵɵdefineInjectable({factory:function(){return new E(p.ɵɵinject(g))},token:E,providedIn:"root"}),E.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],E.ctorParameters=function(){return[{type:g}]};var w=function(){function t(){}return t.prototype.intercept=function(t,e){return e.handle(t).pipe(l.retry(1),l.catchError((function(t){var e="";return e=t.error instanceof ErrorEvent?"Error: "+t.error.message:"Error Code: "+t.status+"\nMessage: "+t.message,s.throwError(e)})))},t}(),A=function(){function t(t){this._HttpcallService_=t}return t.prototype.get=function(){return this._HttpcallService_.api({service_NAME:"LOCATION",request_TYPE:"GET",request_URI:"lookup",request_BODY:""})},t.prototype.getAll=function(){return this._HttpcallService_.api({service_NAME:"LOCATION",request_TYPE:"GET",request_URI:"lookup/all",request_BODY:""})},t.prototype.getOne=function(t){var e={service_NAME:"LOCATION",request_TYPE:"GET",request_URI:"lookup/"+t,request_BODY:""};return this._HttpcallService_.api(e)},t.prototype.add=function(t){var e={service_NAME:"LOCATION",request_TYPE:"POST",request_URI:"lookup",request_BODY:JSON.stringify(t)};return this._HttpcallService_.api(e)},t.prototype.update=function(t,e){var o={service_NAME:"LOCATION",request_TYPE:"PUT",request_URI:"lookup/"+e,request_BODY:JSON.stringify(t)};return this._HttpcallService_.api(o)},t.prototype.delete=function(t){var e={service_NAME:"LOCATION",request_TYPE:"DELETE",request_URI:"lookup/"+t,request_BODY:""};return this._HttpcallService_.api(e)},t.prototype.search=function(t){var e={service_NAME:"LOCATION",request_TYPE:"POST",request_URI:"lookup/search",request_BODY:JSON.stringify(t)};return this._HttpcallService_.api(e)},t.prototype.searchAll=function(t){var e={service_NAME:"LOCATION",request_TYPE:"POST",request_URI:"lookup/search/all",request_BODY:JSON.stringify(t)};return this._HttpcallService_.api(e)},t.prototype.advancedSearch=function(t){var e={service_NAME:"LOCATION",request_TYPE:"POST",request_URI:"lookup/advancedsearch",request_BODY:JSON.stringify(t)};return this._HttpcallService_.api(e)},t.prototype.advancedSearchAll=function(t){var e={service_NAME:"LOCATION",request_TYPE:"POST",request_URI:"lookup/advancedsearch/all",request_BODY:JSON.stringify(t)};return this._HttpcallService_.api(e)},t.prototype.lookup=function(t){var e={service_NAME:"LOCATION",request_TYPE:"POST",request_URI:"lookup/entity",request_BODY:JSON.stringify({entityname:t})};return this._HttpcallService_.api(e)},t.prototype.entityList=function(){return this._HttpcallService_.api({service_NAME:"LOCATION",request_TYPE:"GET",request_URI:"lookup/entitylist",request_BODY:""})},t}();A.ɵprov=p.ɵɵdefineInjectable({factory:function(){return new A(p.ɵɵinject(g))},token:A,providedIn:"root"}),A.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],A.ctorParameters=function(){return[{type:g}]};
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var T=function(t,e){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},T(t,e)};Object.create;Object.create;var N=function(t){function e(){var e=t.call(this)||this;return e.headers.set("Content-Type","application/json"),e.headers.set("grant_type","password"),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}T(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}(e,t),e.prototype.merge=function(e){var o=t.prototype.merge.call(this,e);if(e.url){if(-1!==e.url.search("/USERLOGIN/"))var n=JSON.parse(localStorage.getItem("LocationManagement")).basic_Token_;else n=JSON.parse(localStorage.getItem("LocationManagement")).access_token;return o.headers.set("authorization","bearer "+n),o}return o.headers.set("authorization","bearer "+JSON.parse(localStorage.getItem("LocationManagement")).access_token),o},e}(a.BaseRequestOptions),L=function(){function t(t,e){this.http=t,this.loginService=e,this.LoggedUserId=this.loginService.loaddetail(),this.BaseUrl=this.loginService.loaddetail().oauthservice_PATH}return t.prototype.userprivileges=function(){return this.http.post(this.BaseUrl+"login/userprivileges",{application_ID:this.loginService.loaddetail().application_ID},{headers:new a.Headers({"Content-Type":"application/json",grant_type:"password",authorization:"bearer "+this.loginService.loaddetail().basic_Token_})}).pipe(l.map((function(t){return t.json()})))},t}();L.ɵprov=p.ɵɵdefineInjectable({factory:function(){return new L(p.ɵɵinject(v.Http),p.ɵɵinject(h))},token:L,providedIn:"root"}),L.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],L.ctorParameters=function(){return[{type:a.Http},{type:h}]},t.GetaddressService=E,t.HttpErrorInterceptor=w,t.HttpcallService=g,t.LocationComponent=b,t.LocationService=m,t.LocationleveltypeComponent=D,t.LocationleveltypeService=_,t.LocationlibraryComponent=y,t.LocationlibraryModule=S,t.LocationlibraryService=f,t.LocationsearchfilterComponent=O,t.LoginService=h,t.LookupService=A,t.OnfailService=I,t.RequestOptionsService=N,t.SidebarService=L,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=locationlibrary.umd.min.js.map